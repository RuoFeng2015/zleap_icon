# Figma Icon Sync æ’ä»¶

ä¸€é”®å°† Figma ä¸­çš„å›¾æ ‡åŒæ­¥åˆ° GitHub ä»“åº“ï¼Œè‡ªåŠ¨ç”Ÿæˆ React ç»„ä»¶å¹¶å‘å¸ƒåˆ° NPMã€‚

## åŠŸèƒ½

- ğŸ”„ ä¸€é”®è§¦å‘å›¾æ ‡åŒæ­¥
- ğŸ“ æ”¯æŒè¾“å…¥ç‰ˆæœ¬å·å’Œæ›´æ–°è¯´æ˜
- ğŸ”— è‡ªåŠ¨åˆ›å»º GitHub Pull Request
- âœ… å®æ—¶æ˜¾ç¤ºåŒæ­¥çŠ¶æ€

## å®‰è£…

### æ–¹å¼ä¸€ï¼šä» Figma Community å®‰è£…ï¼ˆæ¨èï¼‰

1. è®¿é—® [Figma Community](https://www.figma.com/community)
2. æœç´¢ "Icon Sync"
3. ç‚¹å‡» "Install"

### æ–¹å¼äºŒï¼šæœ¬åœ°å¼€å‘å®‰è£…

1. å…‹éš†ä»“åº“å¹¶è¿›å…¥æ’ä»¶ç›®å½•ï¼š

```bash
cd figma-plugin
npm install
npm run build
```

2. åœ¨ Figma ä¸­åŠ è½½æ’ä»¶ï¼š
   - æ‰“å¼€ Figma æ¡Œé¢åº”ç”¨
   - èœå• â†’ **Plugins** â†’ **Development** â†’ **Import plugin from manifest...**
   - é€‰æ‹© `figma-plugin/manifest.json`

## é…ç½®

é¦–æ¬¡ä½¿ç”¨éœ€è¦é…ç½® GitHub ä¿¡æ¯ï¼š

### 1. è·å– GitHub Personal Access Token

1. è®¿é—® [GitHub Token Settings](https://github.com/settings/tokens)
2. ç‚¹å‡» **Generate new token (classic)**
3. è¾“å…¥ Token æè¿°
4. å‹¾é€‰ `repo` æƒé™ï¼ˆå®Œæ•´ä»“åº“è®¿é—®ï¼‰
5. ç‚¹å‡» **Generate token**
6. å¤åˆ¶ç”Ÿæˆçš„ Token

### 2. åœ¨æ’ä»¶ä¸­é…ç½®

1. åœ¨ Figma ä¸­è¿è¡Œæ’ä»¶
2. ç‚¹å‡» **Settings** æˆ–é¦–æ¬¡æ‰“å¼€æ—¶è‡ªåŠ¨æ˜¾ç¤ºé…ç½®ç•Œé¢
3. å¡«å†™ï¼š
   - **GitHub Repository**: ä»“åº“åœ°å€ï¼Œæ ¼å¼ `owner/repo`ï¼ˆå¦‚ `my-org/icon-library`ï¼‰
   - **GitHub Token**: ä¸Šä¸€æ­¥è·å–çš„ Token
4. ç‚¹å‡» **Save Configuration**

## ä½¿ç”¨æ–¹æ³•

### åŒæ­¥å›¾æ ‡

1. åœ¨ Figma ä¸­æ‰“å¼€åŒ…å«å›¾æ ‡çš„æ–‡ä»¶
2. è¿è¡Œæ’ä»¶ï¼š**Plugins** â†’ **Icon Sync**
3. å¡«å†™åŒæ­¥ä¿¡æ¯ï¼š
   - **Version**: ç‰ˆæœ¬å·ï¼ˆå¦‚ `1.2.0`ï¼‰ï¼Œéµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬
   - **Update Message**: æ›´æ–°è¯´æ˜ï¼ˆå¦‚ "Added new arrow icons"ï¼‰
4. ç‚¹å‡» **Sync Icons**
5. ç­‰å¾…åŒæ­¥å®Œæˆï¼Œæ’ä»¶ä¼šæ˜¾ç¤ºï¼š
   - âœ… æˆåŠŸï¼šæ˜¾ç¤º PR é“¾æ¥
   - âŒ å¤±è´¥ï¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯å’Œé‡è¯•æŒ‰é’®

### ç‰ˆæœ¬å·è§„èŒƒ

éµå¾ª [è¯­ä¹‰åŒ–ç‰ˆæœ¬](https://semver.org/lang/zh-CN/)ï¼š

- **Major (x.0.0)**: æœ‰å›¾æ ‡åˆ é™¤æˆ–ç ´åæ€§å˜æ›´
- **Minor (0.x.0)**: æœ‰æ–°å›¾æ ‡æ·»åŠ 
- **Patch (0.0.x)**: ä»…æœ‰å›¾æ ‡ä¿®æ”¹

## å›¾æ ‡è®¾è®¡è§„èŒƒ

ä¸ºç¡®ä¿å›¾æ ‡æ­£ç¡®å¤„ç†ï¼Œè¯·éµå¾ªä»¥ä¸‹è§„èŒƒï¼š

### å°ºå¯¸

- æ”¯æŒçš„å°ºå¯¸ï¼š16Ã—16, 20Ã—20, 24Ã—24, 32Ã—32
- å›¾æ ‡å¿…é¡»æ˜¯æ­£æ–¹å½¢

### å‘½å

- ä½¿ç”¨å°å†™å­—æ¯å’Œè¿å­—ç¬¦
- ä»¥å­—æ¯å¼€å¤´
- ç¤ºä¾‹ï¼š`arrow-right`, `check-circle`, `user-profile`

### SVG ç»“æ„

- é¿å…ä½¿ç”¨ `<image>` å…ƒç´ 
- é¿å…ä½¿ç”¨ `<foreignObject>` å…ƒç´ 
- é¿å…å†…è” `<style>` æ ‡ç­¾
- ä½¿ç”¨ç®€å•çš„è·¯å¾„å’Œå½¢çŠ¶

### é¢œè‰²

- ä½¿ç”¨å•è‰²è®¾è®¡
- é¢œè‰²ä¼šè¢«è‡ªåŠ¨æ›¿æ¢ä¸º `currentColor`
- æœ€ç»ˆé¢œè‰²ç”±ä½¿ç”¨æ—¶çš„ CSS æ§åˆ¶

## å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Figma è®¾è®¡å›¾æ ‡  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿è¡Œ Icon Sync  â”‚
â”‚     æ’ä»¶        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è§¦å‘ GitHub     â”‚
â”‚ Actions å·¥ä½œæµ   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è‡ªåŠ¨åˆ›å»º PR     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å®¡æ ¸å¹¶åˆå¹¶ PR   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è‡ªåŠ¨å‘å¸ƒåˆ° NPM  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•…éšœæ’é™¤

### "Configuration not found"

**åŸå› **: æ’ä»¶æœªé…ç½®æˆ–é…ç½®ä¸¢å¤±

**è§£å†³**: é‡æ–°é…ç½® GitHub Repository å’Œ Token

### "Failed to trigger workflow"

**åŸå› **: GitHub Token æ— æ•ˆæˆ–æƒé™ä¸è¶³

**è§£å†³**:

1. æ£€æŸ¥ Token æ˜¯å¦è¿‡æœŸ
2. ç¡®è®¤ Token æœ‰ `repo` æƒé™
3. é‡æ–°ç”Ÿæˆ Token å¹¶æ›´æ–°é…ç½®

### "Repository not found"

**åŸå› **: ä»“åº“åœ°å€é”™è¯¯æˆ–æ— è®¿é—®æƒé™

**è§£å†³**:

1. æ£€æŸ¥ä»“åº“åœ°å€æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆ`owner/repo`ï¼‰
2. ç¡®è®¤ä½ æœ‰ä»“åº“çš„è®¿é—®æƒé™
3. ç¡®è®¤ä»“åº“å­˜åœ¨

### "No icons found"

**åŸå› **: Figma æ–‡ä»¶ä¸­æ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„å›¾æ ‡ç»„ä»¶

**è§£å†³**:

1. ç¡®ä¿å›¾æ ‡æ˜¯ Component ç±»å‹
2. æ£€æŸ¥å›¾æ ‡å‘½åæ˜¯å¦ç¬¦åˆè§„èŒƒ
3. ç¡®ä¿å›¾æ ‡å°ºå¯¸åœ¨å…è®¸èŒƒå›´å†…

## å¼€å‘

### é¡¹ç›®ç»“æ„

```
figma-plugin/
â”œâ”€â”€ manifest.json    # æ’ä»¶é…ç½®
â”œâ”€â”€ code.ts          # æ’ä»¶ä¸»é€»è¾‘
â”œâ”€â”€ ui.html          # æ’ä»¶ UI
â”œâ”€â”€ package.json     # ä¾èµ–é…ç½®
â””â”€â”€ tsconfig.json    # TypeScript é…ç½®
```

### æœ¬åœ°å¼€å‘

```bash
# å®‰è£…ä¾èµ–
npm install

# æ„å»ºï¼ˆç›‘å¬æ¨¡å¼ï¼‰
npm run watch

# å•æ¬¡æ„å»º
npm run build
```

### è°ƒè¯•

1. åœ¨ Figma ä¸­æ‰“å¼€ **Plugins** â†’ **Development** â†’ **Open console**
2. æŸ¥çœ‹ `console.log` è¾“å‡º
3. ä½¿ç”¨ `figma.notify()` æ˜¾ç¤ºè°ƒè¯•ä¿¡æ¯

## API å‚è€ƒ

### é…ç½®å­˜å‚¨

```typescript
// ä¿å­˜é…ç½®
await figma.clientStorage.setAsync('config', {
  githubRepo: 'owner/repo',
  githubToken: 'ghp_xxx',
})

// è¯»å–é…ç½®
const config = await figma.clientStorage.getAsync('config')
```

### è§¦å‘ GitHub Actions

```typescript
// repository_dispatch äº‹ä»¶
POST https://api.github.com/repos/{owner}/{repo}/dispatches
{
  "event_type": "icon_sync",
  "client_payload": {
    "version": "1.0.0",
    "message": "Update icons",
    "figma_file_key": "xxx",
    "triggered_at": "2024-01-01T00:00:00Z"
  }
}
```

## è®¸å¯è¯

MIT License
